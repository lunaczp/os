Ѓ
_len:
¬255
¬-255
¬-254
¬1023
¬-1
¬-1
¬-1
¬1279
_interleave:
¬513
¬1027
¬1541
¬2055
¬2569
¬3083
¬3597
¬15
_gap:
¬42
¬27
¬42
¬42
¬35
¬35
_rate:
¬2
Є
¬2
¬2
¬1
¬1
_nr_sectors:
¬9
¬15
¬9
¬9
¬9
¬9
_nr_blocks:
¬720
¬2400
¬720
¬1440
¬720
¬1440
_steps_per_cyl:
¬1
¬1
¬2
¬1
¬2
¬1
_mtr_setup:
¬15
¬45
¬15
¬15
¬45
…_floppy_task
¬45
Ж
_floppy_task:
Г
В
„т,#6
Ѓ
_2:
¬I001C
¬3
¬1
¬I001A
¬I001B
Ж
Х
јб_mess
А
П16
А
”_receive
К
К
Ќ_messц
jge I0016
Ѕ_mess
јб_1
А
”_panic
К
К
љ
је_mess
јѕ,м
је_mess+6
ј–,м
Ѕ_mess+2
ћI0018
I001A:
јб_mess
А
”_do_rdwt
К
Ф
ћI0019
I001B:
јб_mess
А
”_do_rdwt
К
Ф
ћI0019
I001C:
ј∆,#-22
ћI0019
I0018:
ји#_2
Й
ћ.csa2
I0019:
ј_mess+2,#68
је–
ј_mess+4,м
І
ј_mess+6,м
јб_mess
А
є
”_send
К
К
≠
_do_rdwt:
Г
В
„т,#12
Т
јд4«
ј–,л
Ќ–ц
jl I0022
Ќ–,#2
jl I0023
I0022:
јб-5
А
ћI0021
I0023:
і8
mul –
ї
ƒв_floppy
ј∆,м
І
јд–
ј6«,л
Т
јд2«
І
∞
Т
Ѕ12«
Ѕ10«
З
А
П024
А
”.rmi4
„з#0
sbb в0
ў1f
or ео
1: 
or ем
je I0027
јб-22
А
ћI0021
I0027:
Т
Ѕ12«
Ѕ10«
З
А
јб512
А
”.dvi4
ј-12(с),л
ј-10(с),н
јд-12(с)
је-10(с)
„б2400
sbb в0
ў1f
÷дл
je 1f
№м
1: 
or ем
jl I002A
јб-104
А
ћI0021
I002A:
І
 al,27«
О
Л
ј_d,л
јг4
јв4
јд-12(с)
Ѕ-10(с)
Ц
је_d
sal в1
А
Ѕ_nr_sectors«
Э
Ю
Н
Ц
јг1
sal дcl
Ћем
¶
А
”.dvu4
І
ј8«,л
је_d
sal в1
јд_nr_sectors«
cwd
јв_interleave
¶
Ѕ-10(с)
Ѕ-12(с)
Ь
А
”.rmi4
Й
ƒео
М
О
Л
І
ј10«,л
јг4
јв4
јд-12(с)
Ѕ-10(с)
Ц
је_d
sal в1
А
Ѕ_nr_sectors«
Э
Ю
Н
Ц
јг1
sal дcl
Ћем
¶
А
”.rmu4
је_d
sal в1
јдо
cwd
iрv _nr_sectors«
І
ј12«,л
Т
ји∆
јд8«
ј14(п),л
Т
ји∆
јд18«
ј16(п),л
Т
ји∆
јд6«
ј4(п),л
І
Ќ14«,#1024
je I002D
јб-22
push л
ћI0021
I002D:
јЎц
I00210:
ЌЎ,#20
jg I002F
№Ў
јв3
јдЎ
cwd
iрv м
or зо
ўI00213
је_d
№м
јг6
јдм
cwd
iрv н
ј_d,о
І
 27«,dl
ј_need_reset,#1
I00213:
је_d
sal в1
јд_nr_blocks«
cwd
је-12(с)
јж-10(с)
„ел
sbb жо
ў1f
÷ем
je 1f
№н
1: 
or жн
jl I00216
ћI00210
I00216:
Ќ_need_resetц
je I00219
”_reset
I00219:
°
”_dma_setup
К
°
”_start_motor
К
°
”_seek
К
ђ
Ќѕц
je I0021C
ћI00210
I0021C:
°
”_transfer
К
ђ
Ќѕц
ўI0021F
ћI002F
I0021F:
Ќѕ,#-5
ўI00210
I002F:
ј_motor_goal,#12
јб_stop_motor
А
П80
А
”_clock_mess
К
К
Ќѕц
ўI00225
І
Ќ8«ц
jle I00225
ј_initialized,#1
I00225:
Ќѕц
ўI00229
П024
А
ћI0021
I00229:
јб-5
А
I0021:
Н
Е
Д
Б
_dma_setup:
Г
В
„т,#22
Т
Ќ«,#3
ўI0033
јб70
А
ћI0034
I0033:
јб74
А
I0034:
Э
Ю
Н
Ц
Ф
Т
јд16«
ј-1ќ,л
Ѕ14«
Э
Ю
Н
Ц
ј-1‘,л
Т
јб86
mul 4«
ƒб688
ї
Ѕ-1‘
Ѕ-1ќ
П
А
ƒв_proc
¶
”_umap
ƒт,#8
ј-22(с),л
ј-20(с),о
Ћжн
јд-22(с)
је-20(с)
©
2: sar в1
rcr б1
®
1:
Э
Ю
Ц
•
Э
Ю
Ц
ђ
јг8
јд-22(с)
је-20(с)
©
2: sar в1
rcr б1
®
1:
Э
Ю
Ц
•
Э
Ю
Ц
ј–,л
јг16
јд-22(с)
је-20(с)
©
2: sar в1
rcr б1
®
1:
Э
Ю
Ц
•
Э
Ю
Ц
јЎ,л
јд-1‘
„б1
Ћжн
shr дcl
Э
Ю
Ц
Э
Ю
Ц
•
Э
Ю
Ц
ј-10(с),л
јд-1‘
„б1
јг8
shr дcl
Э
Ю
Ц
Э
Ю
Ц
•
Э
Ю
Ц
ј-12(с),л
јд-22(с)
је-20(с)
„б0
sbb в0
ў1f
or ел
1: 
or ем
ўI0036
Э
Ю
јд-1ќ
Ц
А
јб_3
А
”_panic
К
К
I0036:
З
А
јг4
јв4
јд-22(с)
Ѕ-1‘
Ѕ-20(с)
Ц
Й
√н
√о
ƒжл
adc зм
„г1
sbb з#0
Ь
Ѕн
П6
А
√н
Н
Й
©
2: shr в1
rcr б1
®
1:
•
÷в0
ј-1≈,л
јдЎ
Ќ-1≈,л
je I0039
ЅЎ
јб_4
А
”_panic
К
К
I0039:
”_lock
°
П2
А
”_port_out
К
К
°
П1
А
”_port_out
К
К
push ѕ
јб4
А
”_port_out
К
К
Ѕ–
јб4
А
”_port_out
К
К
ЅЎ
П29
А
”_port_out
К
К
Ѕ-10(с)
јб5
А
”_port_out
К
К
Ѕ-12(с)
јб5
А
”_port_out
К
К
”_unlock
і
А
П0
А
”_port_out
К
К
Е
Д
Б
_start_motor:
Г
В
„т,#6
”_lock
Т
јд6«
ƒб4
јжл
П
sal дcl
Ф
Ѕ6«
Э
Ю
Н
Ц
А
Э
Ю
Ч
Ц
or б12
Й
or дм
Э
Ю
Ц
ј_motor_goal,л
је_motor_status
test _prev_motor,м
je I0043
је_prev_motor
or _motor_goal,м
I0043:
Ч
÷д_motor_status
ђ
Ѕ_motor_goal
П010
А
”_port_out
К
К
је_motor_goal
ј_motor_status,м
І
ј_prev_motor,м
”_unlock
Ќѕц
je I0046
Е
Д
Б
I0046:
је_d
sal в1
јб_send_mess
А
Ѕ_mtr_setup«
”_clock_mess
К
К
јб_mess
А
јб-3
А
”_receive
К
К
Е
Д
Б
_stop_motor:
Г
В
Э
Ю
јд_motor_goal
Ц
÷б240
А
Э
Ю
јд_motor_status
Ц
÷б240
Й
Ќел
je I0053
Ѕ_motor_goal
П010
А
”_port_out
К
К
је_motor_goal
ј_motor_status,м
I0053:
Е
Д
Б
_seek:
Г
В
А
Т
cmpb 26«ц
ўI0063
И
”_recalibrate
К
Щ
je I0063
јб-1
А
ћI0061
I0063:
Т
ји≈
јд8(п)
Ќ2«,л
ўI0069
З
А
ћI0061
I0069:
П5
А
”_fdc_out
К
Т
Э
јд12«
sal дcl
or д6«
А
”_fdc_out
К
је_d
sal в1
ји≈
јд8(п)
mul _steps_per_cyl«
А
”_fdc_out
К
Ќ_need_resetц
je I006C
јб-1
А
ћI0061
I006C:
јб_mess
А
јб-1
А
”_receive
К
К
јб8
А
”_fdc_out
К
И
”_fdc_results
К
Ф
Т
 al,18«
О
Л
Э
Ю
Ц
÷б248
Ќб32
je I006F
ј∆,#-1
I006F:
Т
 al,19«
О
Л
је_d
sal в1
ји≈
А
јд8(п)
mul _steps_per_cyl«
Й
Ќел
je I00612
ј∆,#-1
I00612:
Ќ∆ц
je I00615
И
”_recalibrate
К
Щ
je I00615
јб-1
А
ћI0061
I00615:
°
I0061:
Н
Е
Д
Б
_transfer:
Г
В
„т,#10
Т
cmpb 26«ц
ўI0073
јб-2
А
ћI0071
I0073:
Т
јд6«
ƒб4
јжл
је_motor_status
sar еcl
testb bl,#1
ўI0076
јб-2
А
ћI0071
I0076:
Ќ_pc_atц
je I0079
је_d
sal в1
Ѕ_rate«
П015
А
call _port_out
К
К
I0079:
Т
Ќ«,#3
ўI007C
і30
А
ћI007D
I007C:
П97
А
I007D:
Э
Ю
Н
Ц
ј–,л
Ѕ–
”_fdc_out
К
Т
Э
јд12«
sal дcl
or д6«
А
”_fdc_out
К
Т
Ѕ8«
”_fdc_out
К
Т
Ѕ12«
”_fdc_out
К
Т
Ѕ10«
”_fdc_out
К
 al,_len+4
О
Л
А
”_fdc_out
К
је_d
sal в1
Ѕ_nr_sectors«
”_fdc_out
К
је_d
sal в1
Ѕ_gap«
”_fdc_out
К
і55
А
”_fdc_out
К
Ќ_need_resetц
je I007F
јб-2
А
ћI0071
I007F:
јб_mess
А
јб-1
А
”_receive
К
К
И
”_fdc_results
К
Ф
Ќ∆ц
je I00712
°
ћI0071
I00712:
Т
 al,19«
О
Л
Э
Ю
Ц
testb al,#5
ўI00714
Т
 al,20«
’ah,ah
Л
Э
Ю
Ц
testb al,#31
je I00715
I00714:
Т
 26«ц
I00715:
Т
 al,19«
О
Л
Э
Ю
Ц
testb al,#2
je I00719
Т
Ѕ6«
јб_5
А
”_printk
К
К
јб-5
А
ћI0071
I00719:
Т
 al,18«
О
Л
Э
Ю
Ц
testb al,#248
je I0071C
јб-2
А
ћI0071
I0071C:
Т
 al,20«
О
Л
А
 al,19«
О
Л
Й
or дм
Щ
je I0071F
јб-2
А
ћI0071
I0071F:
Т
 al,21«
О
Л
„д8«
Э
Ю
Ц
јг1
sal дcl
је_d
sal в1
А
Ѕ_nr_sectors«
Э
Ю
Н
Ц
Й
mul м
Э
Ю
Ц
ђ
Т
 al,22«
О
Л
„д12«
је_d
sal в1
mul _nr_sectors«
ƒдѕ
ђ
Т
 al,23«
О
Л
„д10(bx)
ƒдѕ
ђ
јб512
mul ѕ
Ќ14«,л
je I00722
јб-2
А
ћI0071
I00722:
З
А
I0071:
Н
Е
Д
Б
_fdc_results:
Г
В
„т,#8
Љ
I0085:
Ќ∆,#8
jge I0082
јЎц
јѕц
I0089:
Ќѕ,#100
jge I0086
џд–
А
П012
А
”_port_in
К
К
Э
Ю
јд–
Ц
testb al,#128
je I0087
јЎ,#1
ћI0086
I0087:
№ѕ
ћI0089
I0086:
ЌЎц
ўI008E
јб-3
А
ћI0081
I008E:
Э
Ю
јд–
Ц
testb al,—
ўI00811
З
А
ћI0081
I00811:
Э
Ю
јд–
Ц
testb al,#64
ўI00814
јб-3
А
ћI0081
I00814:
џд–
А
П013
А
”_port_in
К
К
Э
Ю
јд–
Ц
•
Э
Ю
Ц
Т
ƒе∆
 18«,al
№∆
ћI0085
I0082:
ј_need_reset,#1
јб-3
А
I0081:
Н
Е
Д
Б
_fdc_out:
Г
В
„т,#6
Ќ_need_resetц
je I0093
Е
Д
Б
I0093:
ј∆,#100
I0096:
°
у∆
Н
Щ
jle I0095
џдѕ
А
П012
А
”_port_in
К
К
Э
Ю
£
Ц
÷б192
Э
Ю
Ц
ђ
Э
Ю
£
Ц
Ќб128
je I0099
ћI0096
I0099:
И
П013
А
”_port_out
К
К
Е
Д
Б
I0095:
ј_need_reset,#1
Е
Д
Б
_recalibrate:
Г
В
А
И
”_start_motor
К
јб7
А
”_fdc_out
К
Т
Ѕ6«
”_fdc_out
К
Ќ_need_resetц
je I00A3
јб-1
А
ћI00A1
I00A3:
јб_mess
А
јб-1
А
”_receive
К
К
јб8
А
”_fdc_out
К
И
”_fdc_results
К
Ф
Т
ј2«,#-1
Ќ∆ц
ўI00A5
Т
 al,18«
О
Л
Э
Ю
Ц
÷б248
Ќб32
ўI00A5
Т
cmpb 19«ц
je I00A6
I00A5:
ј_need_reset,#1
Т
 26«ц
јб-4
А
ћI00A1
I00A6:
Т
 26«,#1
З
А
I00A1:
Н
Е
Д
Б
_reset:
Г
В
„т,#8
ј_need_resetц
”_lock
ј_motor_statusц
ј_motor_goalц
З
А
П010
А
”_port_out
К
К
П2
А
П010
А
”_port_out
К
К
”_unlock
јб_mess
А
јб-1
А
”_receive
К
К
јЎ,#_floppy
јеЎ
 18«ц
јб8
А
”_fdc_out
К
ЅЎ
”_fdc_results
К
ђ
јеЎ
З
 al,18«
А
Э
Ю
Н
Ц
ј–,л
јб3
А
”_fdc_out
К
і23
А
”_fdc_out
К
і
А
”_fdc_out
К
mov ∆ц
I00B5:
Ќ∆,#2
jge I00B2
і8
mul ∆
ї
 _floppy+26«ц
№∆
ћI00B5
I00B2:
Е
Д
Б
_clock_mess:
Г
В
ј_mess+2,#1
ј_mess+4,#-5
Ґ
cwd
ј_mess+10,л
ј_mess+10+2,о
ѓ
ј_mess+14,м
јб_mess
А
јб-3
А
”_sendrec
К
К
Е
Д
Б
_send_mess:
Г
В
ј_mess+2,ё
јб_mess
А
јб-5
А
”_send
К
К
Е
Д
Б
≥
_mess: .zerow 24/2
_d: .zerow 2/2
_initialized: .zerow 2/2
_need_reset: .zerow 2/2
_prev_motor: .zerow 2/2
_motor_goal: .zerow 2/2
_motor_status: .zerow 2/2
_floppy: .zerow 56/2
Ѓ
_1:
¬26980
¬27507
¬29728
¬29537
¬8299
¬28519
¬8308
¬25965
¬29555
¬26465
¬8293
¬29286
¬28015
¬32
_3:
¬21318
¬26400
¬30305
¬8293
¬27750
¬28783
¬31088
¬25632
¬29545
¬8299
¬29284
¬30313
¬29285
¬25120
¬25697
¬24864
њ00
¬114
_4:
¬29268
¬27001
¬26478
¬29728
¬8303
¬19780
¬8257
¬25441
¬28530
¬29555
¬13856
¬19252
¬25120
¬30063
њ10
¬29281
¬121
_5:
¬26948
¬27507
¬29797
¬25972
¬26912
¬8302
¬29284
¬30313
¬8293
¬25637
¬26912
¬8307
¬29303
¬29801
¬8293
¬29296
¬29807
¬25445
¬25972
¬11876
¬10
Ж
